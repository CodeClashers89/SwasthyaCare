<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create New Appointment - SwasthyaCare</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{
            font-family:'Poppins','Inter',sans-serif;
            background:rgba(211,255,240,0.53);
            min-height:100vh;
        }

        /* NAVBAR */
        .navbar{
            background:#64cbab;
            height:80px;
            display:flex;
            align-items:center;
            justify-content:space-between;
            padding:0 50px;
            color:#fff;
        }
        .navbar-brand{font-size:28px;font-weight:600}
        .navbar-center{display:flex;gap:40px}
        .navbar-center a{color:white;text-decoration:none;font-weight:500}
        .navbar-right{display:flex;gap:15px;align-items:center}
        .btn-logout{
            background:#ef4444;
            padding:8px 18px;
            border-radius:8px;
            color:white;
            text-decoration:none;
            font-weight:600;
        }

        /* MAIN */
        .main-content{
            padding:40px 50px;
            max-width:1000px;
            margin:auto;
        }

        .page-title{font-size:32px;font-weight:700}
        .page-subtitle{font-size:14px;color:#666;margin-bottom:30px}

        /* CARD */
        .form-card{
            background:white;
            border-radius:12px;
            padding:30px;
            box-shadow:0 2px 8px rgba(0,0,0,0.08);
        }

        .card-title{
            font-size:18px;
            font-weight:700;
            margin-bottom:20px;
        }

        .divider{border:none;border-top:1px solid #e0e0e0;margin:25px 0}

        /* FORM */
        .form-group{margin-bottom:20px}
        .form-row{
            display:grid;
            grid-template-columns:1fr 1fr;
            gap:20px;
        }
        label{font-size:14px;font-weight:600;margin-bottom:6px;display:block}
        .required{color:#ef4444}

        select,input,textarea{
            width:100%;
            padding:10px 12px;
            border:1px solid #ccc;
            border-radius:8px;
            font-size:13px;
        }
        textarea{resize:vertical;min-height:90px}

        /* TIME SLOTS */
        .time-slot-grid{
            display:flex;
            flex-wrap:wrap;
            gap:12px;
        }
        .time-btn{
            border:1px solid #d1d5db;
            padding:8px 18px;
            border-radius:6px;
            cursor:pointer;
            font-size:13px;
            user-select:none;
        }
        .time-btn input{display:none}
        .time-btn:hover{border-color:#64cbab}
        .time-btn:has(input:checked){
            background:#64cbab;
            color:white;
            border-color:#64cbab;
        }

        /* ALERTS */
        .alert{
            padding:12px 16px;
            border-radius:8px;
            font-size:13px;
            margin-bottom:15px;
        }
        .alert-danger{background:#fee2e2;color:#991b1b}
        .alert-info{background:#dbeafe;color:#1e40af}

        /* BUTTONS */
        .button-group{
            display:flex;
            gap:15px;
            margin-top:25px;
        }
        .btn{
            padding:12px 30px;
            border:none;
            border-radius:8px;
            font-size:14px;
            font-weight:600;
            cursor:pointer;
            text-decoration:none;
            text-align:center;
        }
        .btn-primary{background:#10b981;color:white;flex:1}
        .btn-primary:hover{background:#059669}
        .btn-secondary{background:#6b7280;color:white}
        .btn-secondary:hover{background:#4b5563}

        @media(max-width:768px){
            .navbar{flex-direction:column;height:auto;padding:15px}
            .navbar-center{flex-wrap:wrap;gap:20px}
            .main-content{padding:20px}
            .form-row{grid-template-columns:1fr}
            .button-group{flex-direction:column}
        }
    </style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar">
    <div class="navbar-brand">SwasthyaCare</div>
    <div class="navbar-center">
        <a href="{% url 'hospital:receptionist_dashboard' %}">Dashboard</a>
        <a href="{% url 'hospital:register_patient' %}">Register Patient</a>
        <a href="{% url 'hospital:create_appointment' %}">New Appointment</a>
        <a href="{% url 'hospital:receptionist_appointments' %}">All Appointments</a>
    </div>
    <div class="navbar-right">
        {{ user.get_full_name }}
        <a href="{% url 'hospital:logout' %}" class="btn-logout">Logout</a>
    </div>
</nav>

<div class="main-content">

    <!-- HEADER -->
    <h1 class="page-title">Create New Appointment</h1>
    <p class="page-subtitle">Book an appointment for a patient</p>

    <!-- FORM CARD -->
    <div class="form-card">
        <h2 class="card-title">Appointment Form</h2>
        <hr class="divider">

        <!-- Django messages -->
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-danger">{{ message }}</div>
            {% endfor %}
        {% endif %}

        <form method="post">
            {% csrf_token %}

            <!-- Patient & Doctor -->
            <div class="form-row">
                <div class="form-group">
                    <label>Patient <span class="required">*</span></label>
                    {{ form.patient }}
                </div>

                <div class="form-group">
                    <label>Doctor <span class="required">*</span></label>
                    {{ form.doctor }}
                </div>
            </div>

            <!-- Date & Time -->
            <div class="form-row">
                <div class="form-group">
                    <label>Appointment Date <span class="required">*</span></label>
                    {{ form.appointment_date }}
                </div>

                <div class="form-group">
                    <label>Appointment Time <span class="required">*</span></label>
                    <div class="time-slot-grid">
                        {% for slot in slots %}
                        <label class="time-btn">
                            <input type="radio" name="appointment_time" value="{{ slot }}" required>
                            {{ slot }}
                        </label>
                        {% empty %}
                            <p style="color:#991b1b;">No slots available</p>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Reason -->
            <div class="form-group">
                <label>Reason for Visit <span class="required">*</span></label>
                {{ form.reason }}
            </div>

            <!-- Errors -->
            {% if form.errors %}
            <div class="alert alert-danger">
                <strong>Please fix the errors below:</strong>
                <ul>
                    {% for field, errors in form.errors.items %}
                        {% for error in errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            <!-- Info -->
            <div class="alert alert-info">
                <strong>Note:</strong> Doctor availability is automatically checked to prevent double booking.
            </div>

            <!-- Buttons -->
            <div class="button-group">
                <button type="submit" class="btn btn-primary">Create Appointment</button>
                <a href="{% url 'hospital:receptionist_appointments' %}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>

</div>
</body>
</html>
